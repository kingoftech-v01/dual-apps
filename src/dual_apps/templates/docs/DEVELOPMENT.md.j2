# Development Guide for {{ project_name_display }}

## Prerequisites

- Python 3.10+
- Docker & Docker Compose
{% if use_postgres %}- PostgreSQL 15+{% endif %}
{% if celery %}- Redis 7+{% endif %}
{% if use_allauth %}- Social auth credentials (for Google/GitHub login){% endif %}

## Initial Setup

```bash
# Clone repository
git clone https://github.com/your-org/{{ project_name }}.git
cd {{ project_name }}

# Run setup script
./scripts/setup.sh

# Or manual setup:
python -m venv .venv
source .venv/bin/activate
pip install -r requirements/dev.txt
cp .env.example .env
python manage.py migrate
python manage.py createsuperuser
```

## Development Workflow

### 1. Start Development Server

```bash
# Option A: Direct
python manage.py runserver

# Option B: Docker
docker-compose -f docker-compose.dev.yml up -d
```

### 2. Make Changes

- Frontend views: `apps/{app}/views_frontend.py`
- API views: `apps/{app}/views_api.py`
- Templates: `apps/{app}/templates/{app}/`
- Models: `apps/{app}/models.py`

### 3. Create Migrations

```bash
python manage.py makemigrations
python manage.py migrate
```

### 4. Run Tests

```bash
# Full test suite
pytest

# With coverage
pytest --cov=apps --cov-report=html

# Specific tests
pytest apps/{{ apps[0] }}/tests/test_api.py -v
```

### 5. Code Quality

```bash
# Format code
black .

# Lint
ruff check --fix .

# Pre-commit
pre-commit run --all-files
```

## Adding a New App

```bash
# Create app directory
mkdir -p apps/newapp/templates/newapp

# Create files (follow existing app structure)
touch apps/newapp/{__init__,models,views_frontend,views_api,serializers,forms,urls,permissions,admin}.py

# Register in settings
# Add 'apps.newapp' to INSTALLED_APPS

# Create migrations
python manage.py makemigrations newapp
python manage.py migrate
```

## Debugging

### Django Debug Toolbar
Enabled in development at `/__debug__/`

### Logging

```python
import logging
logger = logging.getLogger(__name__)

logger.debug("Debug message")
logger.info("Info message")
logger.error("Error message", exc_info=True)
```

### API Testing

```bash
# Using httpie
http GET localhost:8000/api/v1/{{ apps[0] }}/
http POST localhost:8000/api/v1/{{ apps[0] }}/ title="Test"

# Using curl
curl -X GET http://localhost:8000/api/v1/{{ apps[0] }}/
```

## Database

### Reset Database

```bash
# SQLite
rm db.sqlite3
python manage.py migrate

# PostgreSQL
python manage.py flush --no-input
python manage.py migrate
```

### Generate Demo Data

```bash
{% for app in apps %}
python manage.py demo_data --app={{ app }} --count=20
{% endfor %}
```

{% if use_allauth %}
## Social Authentication Setup

### Configure Social Providers

1. Create OAuth apps at:
   - Google: https://console.developers.google.com/
   - GitHub: https://github.com/settings/developers

2. Add Social Apps in Django Admin:
   - Go to `/admin/socialaccount/socialapp/`
   - Add new Social Application
   - Select provider, add client ID and secret
   - Associate with your site

3. Environment Variables:
```bash
# .env
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-secret
GITHUB_CLIENT_ID=your-github-client-id
GITHUB_CLIENT_SECRET=your-github-secret
```

### Test Social Login

1. Go to `/accounts/login/`
2. Click "Sign in with Google" or "Sign in with GitHub"
3. Verify user is created in `/admin/auth/user/`
{% endif %}

## Common Issues

### Migration Conflicts
```bash
python manage.py makemigrations --merge
```

### Static Files Not Loading
```bash
python manage.py collectstatic --clear
```

### Permission Denied
Check file permissions and ensure `.venv` is activated.

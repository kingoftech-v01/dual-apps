"""
Marketplace Serializers for {{ project_name }}.
Generated by dual-apps v{{ version }} - Marketplace Template

DRF Serializers for multi-vendor marketplace.
"""

from rest_framework import serializers
from .models import (
    Vendor, VendorDocument, VendorBankAccount,
    VendorProduct, VendorOrder, VendorOrderItem,
    Payout, VendorReview
)


class VendorSerializer(serializers.ModelSerializer):
    """Vendor serializer."""
    class Meta:
        model = Vendor
        fields = [
            "id", "store_name", "slug", "description", "logo", "banner",
            "email", "phone", "website", "city", "country",
            "status", "is_featured", "is_verified",
            "rating", "rating_count", "total_orders",
            "created_at"
        ]
        read_only_fields = ["id", "slug", "status", "rating", "rating_count", "total_orders", "created_at"]


class VendorProductSerializer(serializers.ModelSerializer):
    """Vendor product serializer."""
    vendor_name = serializers.CharField(source="vendor.store_name", read_only=True)

    class Meta:
        model = VendorProduct
        fields = [
            "id", "vendor", "vendor_name", "name", "slug", "description",
            "price", "compare_at_price", "cost_price",
            "sku", "stock_quantity", "status",
            "created_at", "updated_at"
        ]
        read_only_fields = ["id", "slug", "created_at", "updated_at"]


class VendorOrderItemSerializer(serializers.ModelSerializer):
    """Vendor order item serializer."""
    class Meta:
        model = VendorOrderItem
        fields = [
            "id", "product", "product_name", "product_sku",
            "quantity", "unit_price", "total"
        ]


class VendorOrderSerializer(serializers.ModelSerializer):
    """Vendor order serializer."""
    items = VendorOrderItemSerializer(many=True, read_only=True)
    vendor_name = serializers.CharField(source="vendor.store_name", read_only=True)

    class Meta:
        model = VendorOrder
        fields = [
            "id", "order_number", "vendor", "vendor_name", "customer",
            "subtotal", "shipping_cost", "tax", "total",
            "status", "items",
            "tracking_number", "carrier",
            "created_at", "shipped_at", "delivered_at"
        ]
        read_only_fields = ["id", "order_number", "created_at"]


class PayoutSerializer(serializers.ModelSerializer):
    """Payout serializer."""
    vendor_name = serializers.CharField(source="vendor.store_name", read_only=True)

    class Meta:
        model = Payout
        fields = [
            "id", "vendor", "vendor_name",
            "amount", "period_start", "period_end",
            "gross_amount", "fees", "net_amount",
            "payment_method", "status",
            "created_at", "processed_at"
        ]
        read_only_fields = fields


class VendorReviewSerializer(serializers.ModelSerializer):
    """Vendor review serializer."""
    customer_name = serializers.CharField(source="customer.username", read_only=True)

    class Meta:
        model = VendorReview
        fields = [
            "id", "vendor", "customer", "customer_name", "order",
            "rating", "title", "comment",
            "created_at"
        ]
        read_only_fields = ["id", "created_at"]

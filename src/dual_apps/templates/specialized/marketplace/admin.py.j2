"""
Marketplace Admin Configuration for {{ project_name }}.
Generated by dual-apps v{{ version }} - Marketplace Template
"""

from django.contrib import admin
from django.utils.html import format_html
from .models import (
    Vendor, VendorDocument, VendorBankAccount,
    VendorProduct, VendorOrder, VendorOrderItem,
    Payout, VendorReview
)


class VendorDocumentInline(admin.TabularInline):
    model = VendorDocument
    extra = 0


class VendorBankAccountInline(admin.TabularInline):
    model = VendorBankAccount
    extra = 0


@admin.register(Vendor)
class VendorAdmin(admin.ModelAdmin):
    list_display = ["store_name", "user", "status", "is_verified", "rating", "created_at"]
    list_filter = ["status", "is_verified", "is_featured"]
    search_fields = ["store_name", "user__username", "email"]
    readonly_fields = ["total_sales", "total_orders", "rating", "rating_count"]
    inlines = [VendorDocumentInline, VendorBankAccountInline]


class VendorOrderItemInline(admin.TabularInline):
    model = VendorOrderItem
    extra = 0
    readonly_fields = ["product_name", "quantity", "unit_price", "total"]


@admin.register(VendorProduct)
class VendorProductAdmin(admin.ModelAdmin):
    list_display = ["name", "vendor", "price", "stock_quantity", "status", "created_at"]
    list_filter = ["status", "vendor"]
    search_fields = ["name", "vendor__store_name"]


@admin.register(VendorOrder)
class VendorOrderAdmin(admin.ModelAdmin):
    list_display = ["order_number", "vendor", "customer", "subtotal", "status", "created_at"]
    list_filter = ["status", "vendor"]
    search_fields = ["order_number", "vendor__store_name"]
    inlines = [VendorOrderItemInline]


@admin.register(Payout)
class PayoutAdmin(admin.ModelAdmin):
    list_display = ["vendor", "amount", "status", "period_start", "period_end", "created_at"]
    list_filter = ["status", "payment_method"]
    search_fields = ["vendor__store_name"]


@admin.register(VendorReview)
class VendorReviewAdmin(admin.ModelAdmin):
    list_display = ["vendor", "customer", "rating", "created_at"]
    list_filter = ["rating"]
    search_fields = ["vendor__store_name", "customer__username"]

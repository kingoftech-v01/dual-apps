{% raw %}{% for plan in plans %}
<div class="col-lg-4 mb-4">
    <div class="card h-100 {% if plan.recommended %}border-primary{% endif %}">
        {% if plan.recommended %}
        <div class="card-header bg-primary text-white text-center">
            Most Popular
        </div>
        {% endif %}
        <div class="card-body d-flex flex-column">
            <h4 class="card-title text-center">{{ plan.name }}</h4>
            <div class="text-center mb-4">
                <span class="display-4 fw-bold">${{ plan.price }}</span>
                <span class="text-muted">/{{ interval }}</span>
            </div>
            <p class="text-center text-muted mb-4">{{ plan.description }}</p>

            <ul class="list-unstyled mb-4 flex-grow-1">
                {% for feature in plan.features %}
                <li class="mb-2">
                    <i class="bi bi-check-circle-fill text-success me-2"></i>
                    {{ feature }}
                </li>
                {% endfor %}
            </ul>

            {% if current_plan.id == plan.id %}
            <button class="btn btn-secondary w-100" disabled>Current Plan</button>
            {% else %}
            <button class="btn btn-{% if plan.recommended %}primary{% else %}outline-primary{% endif %} w-100"
                    hx-get="{% url 'saas:plan_confirmation' plan.id %}"
                    hx-vals='{"interval": "{{ interval }}"}'
                    hx-target="#plan-confirmation-content"
                    hx-swap="innerHTML"
                    data-bs-toggle="modal"
                    data-bs-target="#selectPlanModal"
                    onclick="document.getElementById('selected-plan-id').value='{{ plan.id }}';document.getElementById('selected-interval').value='{{ interval }}'">
                {% if plan.price > current_plan.price %}Upgrade{% else %}Select{% endif %} Plan
            </button>
            {% endif %}
        </div>
    </div>
</div>
{% endfor %}
{% endraw %}

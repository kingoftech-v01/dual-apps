"""
SaaS Admin Configuration for {{ project_name }}.
Generated by dual-apps v{{ version }} - SaaS Template
"""

from django.contrib import admin
from .models import (
    Organization, OrganizationMember, OrganizationInvite,
    Plan, Subscription, Invoice, PaymentMethod, UsageRecord, APIKey
)


class OrganizationMemberInline(admin.TabularInline):
    model = OrganizationMember
    extra = 0


class OrganizationInviteInline(admin.TabularInline):
    model = OrganizationInvite
    extra = 0


@admin.register(Organization)
class OrganizationAdmin(admin.ModelAdmin):
    list_display = ["name", "slug", "owner", "is_active", "max_users", "created_at"]
    list_filter = ["is_active", "is_verified"]
    search_fields = ["name", "slug", "owner__username"]
    inlines = [OrganizationMemberInline, OrganizationInviteInline]


@admin.register(Plan)
class PlanAdmin(admin.ModelAdmin):
    list_display = ["name", "price", "interval", "max_users", "is_active", "order"]
    list_filter = ["is_active", "interval"]
    search_fields = ["name"]


@admin.register(Subscription)
class SubscriptionAdmin(admin.ModelAdmin):
    list_display = ["organization", "plan", "status", "current_period_end", "created_at"]
    list_filter = ["status", "plan"]
    search_fields = ["organization__name"]


@admin.register(Invoice)
class InvoiceAdmin(admin.ModelAdmin):
    list_display = ["invoice_number", "organization", "total", "status", "invoice_date"]
    list_filter = ["status"]
    search_fields = ["invoice_number", "organization__name"]


@admin.register(PaymentMethod)
class PaymentMethodAdmin(admin.ModelAdmin):
    list_display = ["organization", "type", "last_four", "is_default"]
    list_filter = ["type", "is_default"]


@admin.register(APIKey)
class APIKeyAdmin(admin.ModelAdmin):
    list_display = ["name", "organization", "key_prefix", "is_active", "last_used_at"]
    list_filter = ["is_active"]
    search_fields = ["name", "organization__name"]

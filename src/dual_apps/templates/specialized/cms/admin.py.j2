"""
CMS Admin Configuration for {{ project_name }}.
Generated by dual-apps v{{ version }} - CMS Template
"""

from django.contrib import admin
from .models import (
    Page, PageBlock, Menu, MenuItem, MediaFile, MediaFolder,
    Form, FormField, FormSubmission, Redirect
)


class PageBlockInline(admin.StackedInline):
    model = PageBlock
    extra = 0


@admin.register(Page)
class PageAdmin(admin.ModelAdmin):
    list_display = ["title", "slug", "status", "show_in_nav", "is_homepage", "order"]
    list_filter = ["status", "show_in_nav", "is_homepage"]
    search_fields = ["title", "slug", "content"]
    prepopulated_fields = {"slug": ("title",)}
    inlines = [PageBlockInline]


class MenuItemInline(admin.TabularInline):
    model = MenuItem
    extra = 0


@admin.register(Menu)
class MenuAdmin(admin.ModelAdmin):
    list_display = ["name", "slug", "location"]
    list_filter = ["location"]
    inlines = [MenuItemInline]


@admin.register(MediaFile)
class MediaFileAdmin(admin.ModelAdmin):
    list_display = ["name", "file_type", "folder", "uploaded_by", "created_at"]
    list_filter = ["file_type", "folder"]
    search_fields = ["name", "alt_text"]


@admin.register(MediaFolder)
class MediaFolderAdmin(admin.ModelAdmin):
    list_display = ["name", "parent", "created_at"]
    search_fields = ["name"]


class FormFieldInline(admin.TabularInline):
    model = FormField
    extra = 0


@admin.register(Form)
class FormAdmin(admin.ModelAdmin):
    list_display = ["name", "slug", "is_active", "created_at"]
    list_filter = ["is_active"]
    search_fields = ["name"]
    inlines = [FormFieldInline]


@admin.register(FormSubmission)
class FormSubmissionAdmin(admin.ModelAdmin):
    list_display = ["form", "ip_address", "created_at"]
    list_filter = ["form"]
    readonly_fields = ["data"]


@admin.register(Redirect)
class RedirectAdmin(admin.ModelAdmin):
    list_display = ["from_path", "to_path", "redirect_type", "is_active"]
    list_filter = ["redirect_type", "is_active"]
    search_fields = ["from_path", "to_path"]

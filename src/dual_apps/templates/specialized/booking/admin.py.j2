"""
Booking Admin Configuration for {{ project_name }}.
Generated by dual-apps v{{ version }} - Booking Template
"""

from django.contrib import admin
from .models import (
    ServiceCategory, Service, Staff, StaffService,
    Availability, AvailabilityException,
    Booking, BookingPayment, BookingReminder, BookingReview
)


class StaffServiceInline(admin.TabularInline):
    model = StaffService
    extra = 0


@admin.register(ServiceCategory)
class ServiceCategoryAdmin(admin.ModelAdmin):
    list_display = ["name", "slug", "is_active", "order"]
    list_filter = ["is_active"]
    search_fields = ["name"]
    prepopulated_fields = {"slug": ("name",)}


@admin.register(Service)
class ServiceAdmin(admin.ModelAdmin):
    list_display = ["name", "category", "duration_minutes", "price", "is_active"]
    list_filter = ["is_active", "category", "is_featured"]
    search_fields = ["name"]
    prepopulated_fields = {"slug": ("name",)}


@admin.register(Staff)
class StaffAdmin(admin.ModelAdmin):
    list_display = ["user", "title", "is_active"]
    list_filter = ["is_active"]
    search_fields = ["user__username", "title"]
    inlines = [StaffServiceInline]


@admin.register(Availability)
class AvailabilityAdmin(admin.ModelAdmin):
    list_display = ["staff", "day_of_week", "start_time", "end_time", "is_active"]
    list_filter = ["day_of_week", "is_active", "staff"]


@admin.register(AvailabilityException)
class AvailabilityExceptionAdmin(admin.ModelAdmin):
    list_display = ["staff", "date", "is_available"]
    list_filter = ["is_available", "staff"]


class BookingPaymentInline(admin.TabularInline):
    model = BookingPayment
    extra = 0


class BookingReminderInline(admin.TabularInline):
    model = BookingReminder
    extra = 0


@admin.register(Booking)
class BookingAdmin(admin.ModelAdmin):
    list_display = ["booking_number", "customer", "service", "staff", "start_time", "status"]
    list_filter = ["status", "service", "staff"]
    search_fields = ["booking_number", "customer__username", "customer_email"]
    date_hierarchy = "start_time"
    inlines = [BookingPaymentInline, BookingReminderInline]


@admin.register(BookingReview)
class BookingReviewAdmin(admin.ModelAdmin):
    list_display = ["booking", "rating", "created_at"]
    list_filter = ["rating"]

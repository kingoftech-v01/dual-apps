"""
Booking Admin Configuration for {{ project_name }}.
Generated by dual-apps v{{ version }} - Booking Template
"""

from django.contrib import admin
from .models import (
    ServiceCategory, Service, Staff, Resource,
    Availability, BlockedTime,
    Booking, BookingPayment, BookingReview, NotificationTemplate
)


@admin.register(ServiceCategory)
class ServiceCategoryAdmin(admin.ModelAdmin):
    list_display = ["name", "slug", "is_active", "order"]
    list_filter = ["is_active"]
    search_fields = ["name"]
    prepopulated_fields = {"slug": ("name",)}


@admin.register(Service)
class ServiceAdmin(admin.ModelAdmin):
    list_display = ["name", "category", "duration_minutes", "price", "is_active"]
    list_filter = ["is_active", "category", "is_featured"]
    search_fields = ["name"]
    prepopulated_fields = {"slug": ("name",)}


@admin.register(Staff)
class StaffAdmin(admin.ModelAdmin):
    list_display = ["user", "is_active", "order"]
    list_filter = ["is_active"]
    search_fields = ["user__username", "user__email"]
    filter_horizontal = ["services"]


@admin.register(Resource)
class ResourceAdmin(admin.ModelAdmin):
    list_display = ["name", "capacity", "is_active"]
    list_filter = ["is_active"]
    search_fields = ["name"]


@admin.register(Availability)
class AvailabilityAdmin(admin.ModelAdmin):
    list_display = ["staff", "day_of_week", "start_time", "end_time", "is_available"]
    list_filter = ["day_of_week", "is_available", "staff"]


@admin.register(BlockedTime)
class BlockedTimeAdmin(admin.ModelAdmin):
    list_display = ["title", "staff", "start_datetime", "end_datetime", "is_all_day"]
    list_filter = ["is_all_day", "staff"]
    search_fields = ["title"]


class BookingPaymentInline(admin.TabularInline):
    model = BookingPayment
    extra = 0


@admin.register(Booking)
class BookingAdmin(admin.ModelAdmin):
    list_display = ["id", "customer_name", "service", "staff", "start_datetime", "status"]
    list_filter = ["status", "service", "staff"]
    search_fields = ["customer_name", "customer_email"]
    date_hierarchy = "start_datetime"
    inlines = [BookingPaymentInline]


@admin.register(BookingReview)
class BookingReviewAdmin(admin.ModelAdmin):
    list_display = ["booking", "rating", "is_approved", "created_at"]
    list_filter = ["rating", "is_approved"]


@admin.register(NotificationTemplate)
class NotificationTemplateAdmin(admin.ModelAdmin):
    list_display = ["trigger", "subject", "is_active"]
    list_filter = ["trigger", "is_active"]
